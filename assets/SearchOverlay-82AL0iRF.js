import{_ as A}from"./index-B8MrfPvd.js";import{a,j as s}from"./vendor-animations-CwtVtLOL.js";import{t as I,a as P}from"./siteData-Cg-yhde-.js";import{M as T}from"./vendor-markdown-DzX1W6W1.js";import{L as _}from"./vendor-react-CJnFCXr3.js";function K({isOpen:l,onClose:c}){const[o,b]=a.useState(""),[p,h]=a.useState({site:[],global:[]}),[x,f]=a.useState(!1),[d,y]=a.useState(""),g=a.useRef(null),u=["Search articles, team, or ask anything...","Try 'ESG investing' or 'blockchain'...","Ask about finance trends...","Search for team members..."],[v,k]=a.useState(u[0]);a.useEffect(()=>{if(l){g.current?.focus();let e=0;const t=setInterval(()=>{e=(e+1)%u.length,k(u[e])},3e3);return()=>clearInterval(t)}},[l]);const j=I.flatMap(e=>e.members.map(t=>({...t,title:t.name,url:"/team"}))),m={articles:P.map(e=>({...e,url:`/articles/${e.slug}`,keywords:[e.category,...e.keywords||[]]})),pages:[{title:"About Us",url:"/about",keywords:["about","mission"]},{title:"Our Team",url:"/team",keywords:["team","members"]},{title:"Our Mission",url:"/mission",keywords:["mission","vision"]},{title:"Financial News",url:"/news",keywords:["news","updates"]},{title:"Contact",url:"/contact",keywords:["contact","email"]}],team:j},N="AIzaSyDFBNxqVBrQNFWpEvGj_KSMqOPqsaUAdX4",E=e=>{const t=e.toLowerCase(),i={esg:"ESG (Environmental, Social, and Governance) investing focuses on companies that meet certain sustainability criteria. Key trends in 2024 include stricter regulations, anti-greenwashing measures, and increased focus on impact measurement.",blockchain:"Blockchain is revolutionizing banking through tokenization of real-world assets, DeFi integration, and faster cross-border payments. By 2030, $16 trillion in assets could be tokenized.","private equity":"Private equity in 2024 is characterized by AI adoption, operational value creation, and ESG integration. Deal activity is rebounding with focus on technology, healthcare, and infrastructure sectors.",pfizer:"Pfizer recently acquired Metsera for nearly $10 billion, entering the anti-obesity drug market. This strategic move positions Pfizer to compete with industry leaders like Novo Nordisk and Eli Lilly in the growing obesity treatment market."};for(const[r,n]of Object.entries(i))if(t.includes(r))return n;return null},L=async e=>{console.log("Search Component Build: [CURRENT_DATE_TIME]");try{const{GoogleGenerativeAI:t}=await A(async()=>{const{GoogleGenerativeAI:w}=await import("./vendor-ai-eZp-A-GY.js");return{GoogleGenerativeAI:w}},[],import.meta.url),r=new t(N).getGenerativeModel({model:"gemini-2.5-flash"}),n=`You are an expert financial analyst. Provide a concise, insightful answer to: "${e}". Keep it under 100 words, sophisticated yet accessible.`,G=new Promise((w,R)=>setTimeout(()=>R(new Error("Timeout")),8e3));return(await(await Promise.race([r.generateContent(n),G])).response).text()}catch(t){return console.error("Gemini Search Error:",t),console.error("Error Details:",t.response?await t.response.text():t.message),null}},S=e=>{const t=e.toLowerCase(),i=[];return m.articles.forEach(r=>{(r.title.toLowerCase().includes(t)||r.excerpt.toLowerCase().includes(t)||r.keywords&&r.keywords.some(n=>n.toLowerCase().includes(t)))&&i.push({...r,type:"site"})}),m.pages.forEach(r=>{(r.title.toLowerCase().includes(t)||r.keywords.some(n=>n.toLowerCase().includes(t)))&&i.push({...r,type:"site",excerpt:`Visit our ${r.title} page`})}),m.team.forEach(r=>{(r.title.toLowerCase().includes(t)||r.role.toLowerCase().includes(t))&&i.push({...r,type:"site",excerpt:r.role})}),i},C=async()=>{if(!o.trim()){h({site:[],global:[]}),y("");return}f(!0);const e=S(o);h({site:e,global:[]});let t=await L(o);t||(t=E(o),!t&&e.length===0&&(t=`I can help you explore "${o}" in the context of finance. Check the results below for relevant articles and resources.`)),y(t),f(!1)};return a.useEffect(()=>{const e=setTimeout(()=>{o&&C()},500);return()=>clearTimeout(e)},[o]),a.useEffect(()=>{const e=t=>{t.key==="Escape"&&c()};if(l)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[l,c]),l?s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-start justify-center pt-24 px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:c}),s.jsxs("div",{className:"relative w-full max-w-2xl",children:[s.jsxs("div",{className:"bg-[#1a1a1a]/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:g,type:"text",value:o,onChange:e=>b(e.target.value),placeholder:v,className:"w-full px-6 py-5 bg-transparent text-white placeholder-gray-500 focus:outline-none text-lg transition-opacity duration-500"}),x&&s.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2",children:s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white/30 border-t-white"})})]}),o&&s.jsxs("div",{className:"border-t border-white/10 max-h-[60vh] overflow-y-auto",children:[d&&s.jsx("div",{className:"p-4 bg-white/5 border-b border-white/10",children:s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed",children:s.jsx(T,{children:d})})}),p.site.length>0?s.jsx("div",{className:"py-2",children:p.site.map((e,t)=>s.jsxs(_,{to:e.url,onClick:c,className:"block px-6 py-3 hover:bg-white/5 transition-colors",children:[s.jsx("h3",{className:"text-white font-medium mb-1",children:e.title}),e.excerpt&&s.jsx("p",{className:"text-sm text-gray-400",children:e.excerpt}),e.category&&s.jsx("span",{className:"text-xs text-gray-500 mt-1 inline-block",children:e.category})]},t))}):!x&&!d&&s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No results found"})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2 text-xs text-gray-500",children:[s.jsx("span",{children:"Powered by"}),s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded border border-blue-500/30",children:[s.jsx("svg",{className:"w-3 h-3 text-blue-400",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})}),s.jsx("span",{className:"text-xs font-medium bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Gemini"})]})]})]})]}):null}export{K as default};
